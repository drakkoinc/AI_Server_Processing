version: "3.9"

# Local development infrastructure.
#
# Why this exists:
# - Postgres stores raw emails + AI outputs.
# - Redis stores BullMQ jobs for async processing.
#
# This file is intentionally minimal; in production you would:
# - run managed Postgres/Redis
# - set strong passwords + network isolation
# - enable backups

services:
  postgres:
    image: postgres:16
    container_name: drakko_postgres
    environment:
      POSTGRES_USER: drakko
      POSTGRES_PASSWORD: drakko
      POSTGRES_DB: drakko
    ports:
      - "5432:5432"
    volumes:
      - drakko_pgdata:/var/lib/postgresql/data

  redis:
    image: redis:7
    container_name: drakko_redis
    ports:
      - "6379:6379"

volumes:
  drakko_pgdata:
